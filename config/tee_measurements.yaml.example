# TEE Measurement Configuration Example
# This file should be used to create the Kubernetes ConfigMap
# 
# Usage:
#   kubectl create configmap tee-measurements --from-file=tee_measurements.yaml=./config/tee_measurements.yaml.example
#
# Or update the ConfigMap:
#   kubectl create configmap tee-measurements --from-file=tee_measurements.yaml=./config/tee_measurements.yaml.example --dry-run=client -o yaml | kubectl apply -f -
#
# Note: Matching is by full MRTD + RTMRs (not just RTMR0). Multiple configs may share the same
# RTMR0 (e.g. old and new VM versions during transition). Each config must have a unique version.

measurements:
  # Example: 8x H200 GPU configuration (version for audit trail; server version = latest attestation)
  - version: "1"
    mrtd: "A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
    name: "8xh200"
    description: "8x H200 GPU configuration"
    boot_rtmrs:
      rtmr0: "B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr1: "C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr2: "D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr3: "E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
    runtime_rtmrs:
      rtmr0: "B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr1: "C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr2: "F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr3: "A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
    expected_gpus:
      - "h200"
    gpu_count: 8

  # Example: 8x B200 GPU configuration (same MRTD, different RTMR0 due to different ACPI tables)
  - version: "1"
    mrtd: "A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
    name: "8xb200"
    description: "8x B200 GPU configuration"
    boot_rtmrs:
      rtmr0: "X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6"
      rtmr1: "C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr2: "D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr3: "E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
    runtime_rtmrs:
      rtmr0: "X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6X1Y2Z3W4V5U6"
      rtmr1: "C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr2: "F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
      rtmr3: "A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6A1B2C3D4E5F6"
    expected_gpus:
      - "b200"
    gpu_count: 8
